{"ast":null,"code":"var _jsxFileName = \"/Applications/Applier/Applier/client/src/pages/admin/reportedFeedBack.jsx\",\n    _s = $RefreshSig$();\n\nimport \"../../assets/css/admin.css\";\nimport AdminNav from \"../../components/Nav/adminNav\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport ReviewStore from \"../../stores/ReviewStore\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ReportedFeedBack = () => {\n  _s();\n\n  const storeDelete = ReviewStore(storeDelete => {\n    return {\n      deleteReview: storeDelete.deleteReview\n    };\n  });\n  const [reportedReviews, setReviews] = useState([]);\n  useEffect(() => {\n    const fetchReviews = async () => {\n      try {\n        const response = await axios.get(\"/api/v1/reportedReviews\", {\n          withCredentials: true\n        });\n        setReviews(response.data);\n      } catch (error) {\n        console.error(error); // TODO: Handle errors\n      }\n    };\n\n    fetchReviews();\n  }, []);\n\n  const handleReport = async reviewId => {\n    try {\n      const reviewToUpdate = reportedReviews.find(review => review._id === reviewId);\n\n      if (reviewToUpdate) {\n        const isReported = reviewToUpdate.isReported === \"yes\" ? \"no\" : \"yes\";\n        const response = await axios.put(`http://localhost:4000/api/v1/companies/reportReview/${reviewId}`, {\n          isReported\n        }, {\n          withCredentials: true\n        });\n        console.log(response.data);\n        const updatedReviews = reportedReviews.map(review => {\n          if (review._id === reviewId) {\n            return { ...review,\n              isReported\n            };\n          }\n\n          return review;\n        });\n        setReviews(updatedReviews);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AdminNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt-5\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          sm: 6,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Feedback\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), reportedReviews.map(review => /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt-4 rounded bg-white border border-dark p-2\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"rounded p-5\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: 7,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"pt-5\",\n            children: review.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"/reportedFeedBack/\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger\",\n                onClick: () => storeDelete.deleteReview(review._id),\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          className: \"m-auto\",\n          sm: 2,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleReport(review._id),\n              className: `btn ${review.isReported === \"yes\" ? \"btn-warning\" : \"btn-success\"}`,\n              children: review.isReported === \"yes\" ? \"Reported\" : \"Not Reported\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [review.rate, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u2B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)\n    }, review._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ReportedFeedBack, \"VOY5rw/oxsoZ17qx9JE4Be7kbJY=\");\n\n_c = ReportedFeedBack;\nexport default ReportedFeedBack;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReportedFeedBack\");","map":{"version":3,"names":["AdminNav","React","Fragment","useState","useEffect","Container","Row","Col","ReviewStore","axios","ReportedFeedBack","storeDelete","deleteReview","reportedReviews","setReviews","fetchReviews","response","get","withCredentials","data","error","console","handleReport","reviewId","reviewToUpdate","find","review","_id","isReported","put","log","updatedReviews","map","description","rate"],"sources":["/Applications/Applier/Applier/client/src/pages/admin/reportedFeedBack.jsx"],"sourcesContent":["import \"../../assets/css/admin.css\";\nimport AdminNav from \"../../components/Nav/adminNav\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport ReviewStore from \"../../stores/ReviewStore\";\nimport axios from \"axios\";\nconst ReportedFeedBack = () => {\n  const storeDelete = ReviewStore((storeDelete) => {\n    return {\n      deleteReview: storeDelete.deleteReview,\n    };\n  });\n  const [reportedReviews, setReviews] = useState([]);\n\n  useEffect(() => {\n    const fetchReviews = async () => {\n      try {\n        const response = await axios.get(\"/api/v1/reportedReviews\", {\n          withCredentials: true,\n        });\n\n        setReviews(response.data);\n      } catch (error) {\n        console.error(error);\n        // TODO: Handle errors\n      }\n    };\n    fetchReviews();\n  }, []);\n\n  const handleReport = async (reviewId) => {\n    try {\n      const reviewToUpdate = reportedReviews.find(\n        (review) => review._id === reviewId\n      );\n      if (reviewToUpdate) {\n        const isReported = reviewToUpdate.isReported === \"yes\" ? \"no\" : \"yes\";\n        const response = await axios.put(\n          `http://localhost:4000/api/v1/companies/reportReview/${reviewId}`,\n          { isReported },\n          { withCredentials: true }\n        );\n        console.log(response.data);\n        const updatedReviews = reportedReviews.map((review) => {\n          if (review._id === reviewId) {\n            return {\n              ...review,\n              isReported,\n            };\n          }\n          return review;\n        });\n        setReviews(updatedReviews);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <Fragment>\n      <AdminNav />\n      <Container className=\"mt-5\">\n        <Row>\n          <Col sm={6}>\n            <h1>Feedback</h1>\n          </Col>\n        </Row>\n      </Container>\n      {reportedReviews.map((review) => (\n        <Container\n          className=\"mt-4 rounded bg-white border border-dark p-2\"\n          key={review._id}\n        >\n          <Row className=\"rounded p-5\">\n            <Col sm={7}>\n              <p className=\"pt-5\">{review.description}</p>\n              <div>\n                <form action=\"/reportedFeedBack/\">\n                  <button\n                    className=\"btn btn-danger\"\n                    onClick={() => storeDelete.deleteReview(review._id)}\n                  >\n                    Delete\n                  </button>\n                </form>\n              </div>\n            </Col>\n            <Col className=\"m-auto\" sm={2}>\n              <div>\n                <button\n                  onClick={() => handleReport(review._id)}\n                  className={`btn ${\n                    review.isReported === \"yes\" ? \"btn-warning\" : \"btn-success\"\n                  }`}\n                >\n                  {review.isReported === \"yes\" ? \"Reported\" : \"Not Reported\"}\n                </button>\n              </div>\n              <span>\n                {review.rate} <span>&#11088;</span>\n              </span>\n            </Col>\n          </Row>\n        </Container>\n      ))}\n    </Fragment>\n  );\n};\n\nexport default ReportedFeedBack;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}